<!-- Dashboard Cliente con dise√±o Tailwind manteniendo funcionalidad Angular completa -->
<div class="min-h-screen bg-gradient-to-br from-green-900 via-green-700 to-lime-600 p-4 lg:p-8">
  <div class="max-w-7xl mx-auto dashboard-cliente">
    
    <!-- Header del dashboard -->
    <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 lg:p-8 mb-8 dashboard-header">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
        <div class="mb-4 lg:mb-0 welcome-section">
          <h1 class="text-3xl lg:text-4xl font-bold text-green-800 mb-2">
            ¬°Bienvenido, {{ user?.nombre }}! üëã
          </h1>
          <p class="text-gray-600">Este es tu panel de control personal</p>
        </div>
        
        <div class="flex gap-4 header-stats">
          <div class="bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl p-4 text-center shadow-lg border border-blue-200/50 header-stat">
            <span class="block text-2xl mb-1 stat-icon">üìÖ</span>
            <span class="text-sm text-blue-600 font-medium">{{ fechaActual }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Estados de carga/error -->
    <div *ngIf="loading" class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-12 text-center loading-container">
      <div class="w-12 h-12 border-4 border-green-200 border-t-green-600 rounded-full animate-spin mx-auto mb-4 spinner"></div>
      <p class="text-gray-600 font-medium">Cargando tu dashboard...</p>
    </div>

    <div *ngIf="error && !loading" class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-12 text-center error-container">
      <div class="text-6xl mb-4">‚ö†Ô∏è</div>
      <h3 class="text-xl font-bold text-gray-900 mb-2">Error</h3>
      <p class="text-gray-600 mb-4">{{ error }}</p>
      <button class="px-6 py-3 bg-gradient-to-r from-green-600 to-lime-500 text-white rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 font-medium" (click)="loadDashboard()">
        Reintentar
      </button>
    </div>

    <!-- Contenido del dashboard -->
    <div *ngIf="!loading && !error && dashboard" class="dashboard-content space-y-8">
      
      <!-- Notificaciones Importantes -->
      <div *ngIf="dashboard.notificacionesImportantes?.length" class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 notifications-section">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
          <i class="fas fa-bell text-orange-600"></i> Notificaciones Importantes
        </h2>
        <div class="space-y-4 notifications-list">
          <div 
            *ngFor="let notification of dashboard.notificacionesImportantes.slice(0, 3)" 
            class="flex items-start gap-4 p-4 rounded-xl border-l-4 notification-item"
            [ngClass]="{
              'bg-red-50 border-l-red-500': notification.prioridad === 'alta',
              'bg-yellow-50 border-l-yellow-500': notification.prioridad === 'media',
              'bg-blue-50 border-l-blue-500': notification.prioridad === 'baja'
            }">
            <span class="text-2xl notification-icon">{{ notification.icono }}</span>
            <div class="flex-1 notification-content">
              <h4 class="font-bold text-gray-900">{{ notification.titulo }}</h4>
              <p class="text-gray-700 mt-1">{{ notification.mensaje }}</p>
              <small class="text-gray-500 mt-2 block">{{ formatDate(notification.fecha) }}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Grid de Estad√≠sticas -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 stats-grid">
        
        <!-- Resumen de Compras -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 stat-card primary">
          <div class="flex items-center justify-between mb-4 stat-header">
            <h3 class="text-lg font-bold text-gray-900">üí∞ Resumen de Compras</h3>
            <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg stat-icon">
              üõí
            </div>
          </div>
          <div class="stat-content">
            <div class="main-stat mb-4">
              <span class="block text-3xl font-bold text-gray-900 stat-number">{{ dashboard.resumenCompras.totalCompras }}</span>
              <span class="text-gray-600 stat-label">Compras Realizadas</span>
            </div>
            <div class="space-y-2 sub-stats">
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Total Gastado:</span>
                <span class="font-semibold text-gray-900 sub-stat-number">{{ formatCurrency(dashboard.resumenCompras.totalGastado) }}</span>
              </div>
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Promedio:</span>
                <span class="font-semibold text-gray-900 sub-stat-number">{{ formatCurrency(dashboard.resumenCompras.promedioGasto) }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Mis Productos -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 stat-card success">
          <div class="flex items-center justify-between mb-4 stat-header">
            <h3 class="text-lg font-bold text-gray-900">üì¶ Mis Productos</h3>
            <div class="w-10 h-10 bg-gradient-to-br from-green-600 to-emerald-500 rounded-full flex items-center justify-center text-white shadow-lg stat-icon">
              üìã
            </div>
          </div>
          <div class="stat-content">
            <div class="main-stat mb-4">
              <span class="block text-3xl font-bold text-gray-900 stat-number">{{ dashboard.productosAdquiridos.totalProductosUnicos }}</span>
              <span class="text-gray-600 stat-label">Productos √önicos</span>
            </div>
            <div class="space-y-2 sub-stats">
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Con Garant√≠a:</span>
                <span class="font-semibold text-gray-900 sub-stat-number">{{ dashboard.productosAdquiridos.productosConGarantiaVigente }}</span>
              </div>
              <div class="sub-stat favorite-product">
                <span class="text-sm text-gray-600 sub-stat-label">M√°s Comprado:</span>
                <span class="text-xs text-gray-800 font-medium mt-1 block sub-stat-text">{{ dashboard.productosAdquiridos.productoMasComprado }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Mis Comentarios -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 stat-card info">
          <div class="flex items-center justify-between mb-4 stat-header">
            <h3 class="text-lg font-bold text-gray-900">‚≠ê Mis Comentarios</h3>
            <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-500 rounded-full flex items-center justify-center text-white shadow-lg stat-icon">
              üí¨
            </div>
          </div>
          <div class="stat-content">
            <div class="main-stat mb-4">
              <span class="block text-3xl font-bold text-gray-900 stat-number">{{ dashboard.estadoComentarios.totalComentarios }}</span>
              <span class="text-gray-600 stat-label">Comentarios Totales</span>
            </div>
            <div class="space-y-2 sub-stats">
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Aprobados:</span>
                <span class="font-semibold text-green-700 sub-stat-number">{{ dashboard.estadoComentarios.comentariosAprobados }}</span>
              </div>
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Pendientes:</span>
                <span class="font-semibold text-yellow-700 sub-stat-number">{{ dashboard.estadoComentarios.comentariosPendientes }}</span>
              </div>
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Calificaci√≥n:</span>
                <span class="font-semibold text-gray-900 sub-stat-number">{{ dashboard.estadoComentarios.calificacionPromedio }}/5</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Este Mes -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 stat-card warning">
          <div class="flex items-center justify-between mb-4 stat-header">
            <h3 class="text-lg font-bold text-gray-900">üìä Este Mes</h3>
            <div class="w-10 h-10 bg-gradient-to-br from-orange-600 to-red-500 rounded-full flex items-center justify-center text-white shadow-lg stat-icon">
              üìÖ
            </div>
          </div>
          <div class="stat-content">
            <div class="main-stat mb-4">
              <span class="block text-3xl font-bold text-gray-900 stat-number">{{ dashboard.resumenCompras.comprasEsteMes }}</span>
              <span class="text-gray-600 stat-label">Compras Este Mes</span>
            </div>
            <div class="space-y-2 sub-stats">
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Gastado:</span>
                <span class="font-semibold text-gray-900 sub-stat-number">{{ formatCurrency(dashboard.resumenCompras.gastoEsteMes) }}</span>
              </div>
              <div class="flex justify-between items-center sub-stat">
                <span class="text-sm text-gray-600 sub-stat-label">Pendientes:</span>
                <span class="font-semibold text-orange-700 sub-stat-number">{{ dashboard.resumenCompras.ventasPendientes }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Secciones Principales -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 main-sections">
        
        <!-- Actividad Reciente -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 recent-activity">
          <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
            <i class="fas fa-history text-blue-600"></i> Actividad Reciente
          </h2>
          <div *ngIf="dashboard.actividadReciente?.length; else noActivity" class="space-y-4 activity-list">
            <div 
              *ngFor="let activity of dashboard.actividadReciente" 
              class="flex items-start gap-4 p-4 bg-gray-50/80 backdrop-blur-sm rounded-xl activity-item">
              <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg activity-icon">
                {{ getActivityIcon(activity.tipo) }}
              </div>
              <div class="flex-1 activity-content">
                <h4 class="font-semibold text-gray-900">{{ activity.descripcion }}</h4>
                <div class="flex items-center gap-3 mt-2 activity-meta">
                  <span class="text-sm text-gray-500 activity-date">
                    <i class="fas fa-clock"></i> {{ formatDate(activity.fecha) }}
                  </span>
                  <span class="px-2 py-1 rounded-full text-xs font-medium activity-status" [ngClass]="{
                    'bg-green-100 text-green-800': activity.estado.toLowerCase() === 'completado',
                    'bg-yellow-100 text-yellow-800': activity.estado.toLowerCase() === 'pendiente',
                    'bg-blue-100 text-blue-800': activity.estado.toLowerCase() === 'procesando',
                    'bg-red-100 text-red-800': activity.estado.toLowerCase() === 'cancelado'
                  }">
                    {{ activity.estado }}
                  </span>
                </div>
              </div>
            </div>
          </div>
          <ng-template #noActivity>
            <div class="text-center py-8 no-activity">
              <div class="text-4xl mb-2">üìù</div>
              <p class="text-gray-600">No hay actividad reciente</p>
            </div>
          </ng-template>
        </div>

        <!-- Accesos R√°pidos -->
        <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 quick-access">
          <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
            <i class="fas fa-rocket text-green-600"></i> Accesos R√°pidos
          </h2>
          <div class="space-y-3 quick-access-grid">
            <a 
              *ngFor="let access of dashboard.accesosRapidos" 
              [routerLink]="access.url"
              class="flex items-center gap-4 p-4 bg-gray-50/80 backdrop-blur-sm rounded-xl hover:bg-green-50 hover:shadow-lg transition-all duration-200 border-l-4 quick-access-item"
              [style.border-left-color]="access.color">
              <div class="w-10 h-10 bg-gradient-to-br from-green-600 to-lime-500 rounded-full flex items-center justify-center text-white shadow-lg access-icon">
                {{ access.icono }}
              </div>
              <div class="flex-1 access-content">
                <h4 class="font-semibold text-gray-900">{{ access.titulo }}</h4>
                <p class="text-sm text-gray-600">{{ access.descripcion }}</p>
              </div>
              <div class="text-green-600 access-arrow">
                <i class="fas fa-arrow-right"></i>
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- Estad√≠sticas Generales -->
      <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 general-stats">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
          <i class="fas fa-chart-line text-purple-600"></i> Estad√≠sticas Generales
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 general-stats-grid">
          
          <!-- D√≠as como cliente -->
          <div class="flex items-start gap-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-200/50 general-stat-item">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-500 rounded-full flex items-center justify-center text-white shadow-lg general-stat-icon">
              üë§
            </div>
            <div class="general-stat-content">
              <h4 class="text-xl font-bold text-gray-900">{{ dashboard.estadisticasGenerales.diasComoCliente }} d√≠as</h4>
              <p class="text-gray-600">Como cliente SmartAgro</p>
              <small class="text-gray-500">Desde {{ formatDate(dashboard.estadisticasGenerales.fechaRegistro) }}</small>
            </div>
          </div>

          <!-- Productos Favoritos -->
          <div *ngIf="dashboard.estadisticasGenerales.productosFavoritos?.length" class="flex items-start gap-4 p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl border border-red-200/50 general-stat-item">
            <div class="w-12 h-12 bg-gradient-to-br from-red-600 to-pink-500 rounded-full flex items-center justify-center text-white shadow-lg general-stat-icon">
              ‚ù§Ô∏è
            </div>
            <div class="general-stat-content">
              <h4 class="text-lg font-bold text-gray-900 mb-2">Productos Favoritos</h4>
              <div class="flex flex-wrap gap-2 favorite-products">
                <span 
                  *ngFor="let producto of dashboard.estadisticasGenerales.productosFavoritos.slice(0, 3)" 
                  class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium favorite-tag">
                  {{ producto }}
                </span>
              </div>
            </div>
          </div>

          <!-- Estado de Cuenta -->
          <div class="flex items-start gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200/50 general-stat-item">
            <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg general-stat-icon">
              üéØ
            </div>
            <div class="general-stat-content">
              <h4 class="text-lg font-bold text-gray-900">Estado de Cuenta</h4>
              <p class="text-gray-700">{{ dashboard.resumenCompras.ventasEntregadas }} entregas completadas</p>
              <small class="text-gray-500">{{ dashboard.resumenCompras.ventasPendientes }} pedidos en proceso</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Acciones Sugeridas -->
      <div *ngIf="dashboard.notificacionesImportantes?.length" class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 suggested-actions">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
          <i class="fas fa-lightbulb text-yellow-600"></i> Acciones Sugeridas
        </h2>
        <div class="space-y-4 actions-list">
          
          <!-- Compartir experiencia -->
          <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200/50 action-item" *ngIf="dashboard.estadoComentarios.comentariosPendientes === 0">
            <div class="w-12 h-12 bg-gradient-to-br from-yellow-600 to-orange-500 rounded-full flex items-center justify-center text-white shadow-lg action-icon">
              ‚≠ê
            </div>
            <div class="flex-1 action-content">
              <h4 class="font-bold text-gray-900">Comparte tu experiencia</h4>
              <p class="text-gray-600">¬øHas probado alguno de tus productos? ¬°Danos tu opini√≥n!</p>
            </div>
            <a routerLink="/cliente/comentarios" class="px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-500 text-white rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 font-medium action-button">
              Comentar
            </a>
          </div>

          <!-- Explorar recursos -->
          <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200/50 action-item">
            <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-500 rounded-full flex items-center justify-center text-white shadow-lg action-icon">
              üìö
            </div>
            <div class="flex-1 action-content">
              <h4 class="font-bold text-gray-900">Explora los recursos</h4>
              <p class="text-gray-600">Descarga manuales y accede a documentaci√≥n t√©cnica</p>
            </div>
            <a routerLink="/cliente/documentacion" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-500 text-white rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 font-medium action-button">
              Ver Recursos
            </a>
          </div>

          <!-- Revisar garant√≠as -->
          <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200/50 action-item" *ngIf="dashboard.productosAdquiridos.productosConGarantiaVigente > 0">
            <div class="w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-500 rounded-full flex items-center justify-center text-white shadow-lg action-icon">
              üõ°Ô∏è
            </div>
            <div class="flex-1 action-content">
              <h4 class="font-bold text-gray-900">Revisa tus garant√≠as</h4>
              <p class="text-gray-600">Tienes {{ dashboard.productosAdquiridos.productosConGarantiaVigente }} productos con garant√≠a vigente</p>
            </div>
            <a routerLink="/cliente/documentacion" class="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-500 text-white rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 font-medium action-button">
              Ver Garant√≠as
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>